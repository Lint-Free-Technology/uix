window.addEventListener("uix-bootstrap",(async t=>{t.stopPropagation(),document.addEventListener("ll-custom",(t=>{var i;const n=t.detail;if(!n||"object"!=typeof n)return;const o=null!==(i=n.uix)&&void 0!==i?i:n.card_mod;if(!o||"object"!=typeof o)return;const s=o.action;if(s&&"string"==typeof s&&"function"==typeof e[s])try{const t=e[s]();t&&"function"==typeof t.catch&&t.catch((e=>{console.error(`UIX: Error while executing action "${s}":`,e)}))}catch(e){console.error(`UIX: Error while executing action "${s}":`,e)}}))}));class e{static async clear_cache(){if(window.caches)try{const e=await window.caches.keys(),t=[];e.forEach((e=>{t.push(window.caches.delete(e))})),await Promise.all(t),window.location.reload()}catch(e){console.error("UIX: Failed to clear caches:",e),window.location.reload()}else window.location.reload()}}const t="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global;var i;void 0!==t.EventTarget&&function(e){try{new e}catch(e){return!1}return!0}(t.EventTarget)||(t.EventTarget=function(){function e(){this.__listeners=new Map}return e.prototype=Object.create(Object.prototype),e.prototype.addEventListener=function(e,t,i){if(arguments.length<2)throw new TypeError(`TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ${arguments.length} present.`);const n=this.__listeners,o=e.toString();n.has(o)||n.set(o,new Map);const s=n.get(o);s.has(t)||s.set(t,i)},e.prototype.removeEventListener=function(e,t,i){if(arguments.length<2)throw new TypeError(`TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ${arguments.length} present.`);const n=this.__listeners,o=e.toString();if(n.has(o)){const e=n.get(o);e.has(t)&&e.delete(t)}},e.prototype.dispatchEvent=function(e){if(!(e instanceof Event))throw new TypeError("Failed to execute 'dispatchEvent' on 'EventTarget': parameter 1 is not of type 'Event'.");const t=e.type,i=this.__listeners.get(t);if(i)for(const[t,n]of i.entries()){try{"function"==typeof t?t.call(this,e):t&&"function"==typeof t.handleEvent&&t.handleEvent(e)}catch(e){setTimeout((()=>{throw e}))}n&&n.once&&i.delete(t)}return!0},e}());const n=new WeakMap,o=()=>{};i=Symbol.toStringTag;let s=class e{constructor(e){this.subscribers=[],this.settlement=null,this[i]="Unpromise",this.promise="function"==typeof e?new Promise(e):e;const t=this.promise.then((e=>{const{subscribers:t}=this;this.subscribers=null,this.settlement={status:"fulfilled",value:e},null==t||t.forEach((({resolve:t})=>{t(e)}))}));"catch"in t&&t.catch((e=>{const{subscribers:t}=this;this.subscribers=null,this.settlement={status:"rejected",reason:e},null==t||t.forEach((({reject:t})=>{t(e)}))}))}subscribe(){let e,t;const{settlement:i}=this;if(null===i){if(null===this.subscribers)throw new Error("Unpromise settled but still has subscribers");const i=function(){let e,t;return{promise:new Promise(((i,n)=>{e=i,t=n})),resolve:e,reject:t}}();this.subscribers=function(e,t){return[...e,t]}(this.subscribers,i),e=i.promise,t=()=>{null!==this.subscribers&&(this.subscribers=function(e,t){const i=e.indexOf(t);return-1!==i?function(e,t){return[...e.slice(0,t),...e.slice(t+1)]}(e,i):e}(this.subscribers,i))}}else{const{status:n}=i;e="fulfilled"===n?Promise.resolve(i.value):Promise.reject(i.reason),t=o}return Object.assign(e,{unsubscribe:t})}then(e,t){const i=this.subscribe(),{unsubscribe:n}=i;return Object.assign(i.then(e,t),{unsubscribe:n})}catch(e){const t=this.subscribe(),{unsubscribe:i}=t;return Object.assign(t.catch(e),{unsubscribe:i})}finally(e){const t=this.subscribe(),{unsubscribe:i}=t;return Object.assign(t.finally(e),{unsubscribe:i})}static proxy(t){const i=e.getSubscribablePromise(t);return typeof i<"u"?i:e.createSubscribablePromise(t)}static createSubscribablePromise(t){const i=new e(t);return n.set(t,i),n.set(i,i),i}static getSubscribablePromise(e){return n.get(e)}static resolve(t){const i="object"==typeof t&&null!==t&&"then"in t&&"function"==typeof t.then?t:Promise.resolve(t);return e.proxy(i).subscribe()}static async any(t){const i=(Array.isArray(t)?t:[...t]).map(e.resolve);try{return await Promise.any(i)}finally{i.forEach((({unsubscribe:e})=>{e()}))}}static async race(t){const i=(Array.isArray(t)?t:[...t]).map(e.resolve);try{return await Promise.race(i)}finally{i.forEach((({unsubscribe:e})=>{e()}))}}static async raceReferences(e){const t=e.map(r);try{return await Promise.race(t)}finally{for(const e of t)e.unsubscribe()}}};function r(e){return s.proxy(e).then((()=>[e]))}async function l(){await s.race([customElements.whenDefined("home-assistant"),customElements.whenDefined("hc-main")]);const e=customElements.get("home-assistant")?"home-assistant":"hc-main";for(;!document.querySelector(e);)await new Promise((e=>window.setTimeout(e,100)));return document.querySelector(e)}async function a(){const e=await l();for(;!e.hass;)await new Promise((e=>window.setTimeout(e,100)));return e.hass}const c=e=>class extends e{constructor(){super(...arguments),this.ready=!1,this._connected=!1,this.connectionPromise=new Promise((e=>{this._connectionResolve=e})),this.onReady=()=>{this.ready=!0,this.LOG("Integration ready: UIX loaded and update received"),this.fireBrowserEvent("uix-ready"),this.userReady().then((()=>{this.onUserReady()})).catch((e=>{console.log(`UIX: ${e}. User Frontend settings have not been applied`)}))},this.onConnected=()=>{this._connected=!0,this.LOG("WebSocket connected")},this.onDisconnected=()=>{this.ready=!1,this._connected=!1,this.LOG("WebSocket disconnected"),this.fireBrowserEvent("uix-disconnected")},this.onUserReady=()=>{this.LOG("Hass user data ready"),this.fireBrowserEvent("uix-user-ready")}}LOG(...e){if(void 0===window.uix_log)return;const t=new Date;if(console.log(`${t.toLocaleTimeString()}`,...e),this._connected)try{this.connection.sendMessage({type:"uix/log",message:e[0]})}catch(e){console.log("UIX: Error sending log:",e)}}fireBrowserEvent(e,t=void 0){this.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0}))}async userReady(){if(this.user)return!0;{let e=0;for(;!this.user&&e++<20;)await new Promise((e=>setTimeout(e,500)));if(this.user)return!0;throw new Error("User data not available after 10 seconds")}}incoming_message(e){var t;this._connected||this.onConnected(),e.command?(this.LOG("Command:",e),this.fireBrowserEvent(`uix-command-${e.command}`,e)):e.result&&this.update_config(e.result),null===(t=this._connectionResolve)||void 0===t||t.call(this),this._connectionResolve=void 0}update_config(e){this._data=e,this.LOG("Receive:",e),this.ready||this.onReady(),this.fireBrowserEvent("uix-config-update")}async connect(){const e=(await a()).connection;this.connection=e;const t=()=>{this.LOG("Subscribing to uix/connect events"),e.subscribeMessage((e=>this.incoming_message(e)),{type:"uix/connect",browserID:this.browserID}).catch((e=>{console.error("UIX: Error connecting")}))};t(),e.subscribeEvents((e=>{var i;"uix"===(null===(i=e.data)||void 0===i?void 0:i.component)&&(this.LOG("Detected uix component load"),t())}),"component_loaded"),e.addEventListener("ready",(()=>{this.onConnected()})),e.addEventListener("disconnected",(()=>{this.onDisconnected()})),window.addEventListener("connection-status",(e=>{"connected"===e.detail&&this.onConnected(),"disconnected"===e.detail&&this.onDisconnected()})),async function(e){(await l()).provideHass(e)}(this)}get config(){var e,t;return null!==(t=null===(e=this._data)||void 0===e?void 0:e.config)&&void 0!==t?t:{}}get user(){var e;return null===(e=this.hass)||void 0===e?void 0:e.user}get version(){var e;return null===(e=this._data)||void 0===e?void 0:e.version}};var d={name:"uix",private:!0,version:"5.0.0-beta.2",description:"UIX - UI eXtension for Home Assistant",scripts:{build:"rollup -c","update-manifest-version":"node -e \"const pkg = require('./package.json'); const manifest = require('./custom_components/uix/manifest.json'); manifest.version = pkg.version; require('fs').writeFileSync('./custom_components/uix/manifest.json', JSON.stringify(manifest, null, 2) + '\\n');\"",prebuild:"npm run update-manifest-version",watch:"rollup -c --watch"},keywords:[],author:"Darryn Capes-Davis",license:"MIT",devDependencies:{"@babel/core":"^7.23.6","@babel/preset-env":"^7.23.6","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@semantic-release/changelog":"^6.0.3","@semantic-release/exec":"^7.1.0","@semantic-release/git":"^10.0.1","conventional-changelog-conventionalcommits":"^9.1.0",rollup:"^2.79.2","rollup-plugin-terser":"^7.0.2","rollup-plugin-typescript2":"^0.36.0","semantic-release":"^25.0.3",typescript:"^5.3.3"},dependencies:{"@watchable/unpromise":"^1.0.2",lit:"^3.1.0",tslib:"^2.6.2"}};const u="SELECTTREE-TIMEOUT";async function h(e,t=!1){var i;if((null===(i=e.localName)||void 0===i?void 0:i.includes("-"))&&await customElements.whenDefined(e.localName),e.updateComplete&&await e.updateComplete,t&&(e.pageRendered&&await e.pageRendered,e._panelState)){let t=0;for(;"loaded"!==e._panelState&&t++<5;)await new Promise((e=>setTimeout(e,100)))}}async function p(e,t,i=!1){let n=[e];for("string"==typeof t&&(t=t.split(/(\$| )/));""===t[t.length-1];)t.pop();for(const[e,i]of t.entries()){if("$"===i){await Promise.all([...n].map((e=>h(e)))),n=[...n].map((e=>e.shadowRoot));continue}const e=n[0];if(!e)return null;i.trim().length&&(await h(e),n=e.querySelectorAll(i))}return i?n:n[0]}async function v(e,t,i=!1,n=1e4){return s.race([p(e,t,i),new Promise(((e,t)=>setTimeout((()=>t(new Error(u))),n)))]).catch((e=>{if(!e.message||e.message!==u)throw e;return null}))}const m=t=>class extends t{constructor(){super(),this._versionNotificationPending=!1,this._browserVersion=d.version,this.addEventListener("uix-ready",(async()=>{await this._checkVersion()})),this.addEventListener("uix-disconnected",(()=>{this._versionNotificationPending=!1}))}async _checkVersion(){this.version&&this.version!==this._browserVersion&&(this._versionNotificationPending||(this._versionNotificationPending=!0,await this._localNotification(this.version,this._browserVersion)))}async _localNotification(t,i){let n;do{await new Promise((e=>setTimeout(e,1e3))),n=await v(document.body,"home-assistant $ notification-manager $ ha-toast",!1,1e3)}while(n);const o=`UIX version mismatch! Browser: ${i}, Home Assistant: ${t}`,s={text:"Reload",action:()=>e.clear_cache()};(await l()).dispatchEvent(new CustomEvent("hass-notification",{detail:{message:o,action:s,duration:-1,dismissable:!0}}))}};class f extends(m(c(EventTarget))){constructor(){super(),this.connect()}}function g(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}window.addEventListener("uix-bootstrap",(async e=>{e.stopPropagation(),window.uixCoordinator||(window.uixCoordinator=new f)})),"function"==typeof SuppressedError&&SuppressedError;const y=globalThis,_=y.ShadowRoot&&(void 0===y.ShadyCSS||y.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,w=Symbol(),b=new WeakMap;class ${constructor(e,t,i){if(this._$cssResult$=!0,i!==w)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(_&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=b.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&b.set(t,e))}return e}toString(){return this.cssText}}const x=_?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new $("string"==typeof e?e:e+"",void 0,w))(t)})(e):e,{is:E,defineProperty:A,getOwnPropertyDescriptor:C,getOwnPropertyNames:S,getOwnPropertySymbols:P,getPrototypeOf:U}=Object,T=globalThis,O=T.trustedTypes,N=O?O.emptyScript:"",R=T.reactiveElementPolyfillSupport,I=(e,t)=>e,L={toAttribute(e,t){switch(t){case Boolean:e=e?N:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},D=(e,t)=>!E(e,t),k={attribute:!0,type:String,converter:L,reflect:!1,hasChanged:D};Symbol.metadata??=Symbol("metadata"),T.litPropertyMetadata??=new WeakMap;class j extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=k){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const i=Symbol(),n=this.getPropertyDescriptor(e,i,t);void 0!==n&&A(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){const{get:n,set:o}=C(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return n?.call(this)},set(t){const s=n?.call(this);o.call(this,t),this.requestUpdate(e,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??k}static _$Ei(){if(this.hasOwnProperty(I("elementProperties")))return;const e=U(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(I("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(I("properties"))){const e=this.properties,t=[...S(e),...P(e)];for(const i of t)this.createProperty(i,e[i])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,i]of t)this.elementProperties.set(e,i)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const i=this._$Eu(e,t);void 0!==i&&this._$Eh.set(i,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(x(e))}else void 0!==e&&t.push(x(e));return t}static _$Eu(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$Eg=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$ES(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$E_??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$E_?.delete(e)}_$ES(){const e=new Map,t=this.constructor.elementProperties;for(const i of t.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{if(_)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const i of t){const t=document.createElement("style"),n=y.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=i.cssText,e.appendChild(t)}})(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$E_?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$E_?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t){const i=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,i);if(void 0!==n&&!0===i.reflect){const o=(void 0!==i.converter?.toAttribute?i.converter:L).toAttribute(t,i.type);this._$Em=e,null==o?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(e,t){const i=this.constructor,n=i._$Eh.get(e);if(void 0!==n&&this._$Em!==n){const e=i.getPropertyOptions(n),o="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:L;this._$Em=n,this[n]=o.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,i,n=!1,o){if(void 0!==e){if(i??=this.constructor.getPropertyOptions(e),!(i.hasChanged??D)(n?o:this[e],t))return;this.C(e,t,i)}!1===this.isUpdatePending&&(this._$Eg=this._$EP())}C(e,t,i){this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$EP(){this.isUpdatePending=!0;try{await this._$Eg}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,i]of e)!0!==i.wrapped||this._$AL.has(t)||void 0===this[t]||this.C(t,this[t],i)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$E_?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$ET()}catch(t){throw e=!1,this._$ET(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$E_?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$ET(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Eg}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach((e=>this._$EO(e,this[e]))),this._$ET()}updated(e){}firstUpdated(e){}}j.elementStyles=[],j.shadowRootOptions={mode:"open"},j[I("elementProperties")]=new Map,j[I("finalized")]=new Map,R?.({ReactiveElement:j}),(T.reactiveElementVersions??=[]).push("2.0.2");const H=globalThis,M=H.trustedTypes,q=M?M.createPolicy("lit-html",{createHTML:e=>e}):void 0,X="$lit$",V=`lit$${(Math.random()+"").slice(9)}$`,B="?"+V,z=`<${B}>`,W=document,J=()=>W.createComment(""),G=e=>null===e||"object"!=typeof e&&"function"!=typeof e,F=Array.isArray,Y="[ \t\n\f\r]",K=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Z=/-->/g,Q=/>/g,ee=RegExp(`>|${Y}(?:([^\\s"'>=/]+)(${Y}*=${Y}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),te=/'/g,ie=/"/g,ne=/^(?:script|style|textarea|title)$/i,oe=(e=>(t,...i)=>({_$litType$:e,strings:t,values:i}))(1),se=Symbol.for("lit-noChange"),re=Symbol.for("lit-nothing"),le=new WeakMap,ae=W.createTreeWalker(W,129);function ce(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==q?q.createHTML(t):t}const de=(e,t)=>{const i=e.length-1,n=[];let o,s=2===t?"<svg>":"",r=K;for(let t=0;t<i;t++){const i=e[t];let l,a,c=-1,d=0;for(;d<i.length&&(r.lastIndex=d,a=r.exec(i),null!==a);)d=r.lastIndex,r===K?"!--"===a[1]?r=Z:void 0!==a[1]?r=Q:void 0!==a[2]?(ne.test(a[2])&&(o=RegExp("</"+a[2],"g")),r=ee):void 0!==a[3]&&(r=ee):r===ee?">"===a[0]?(r=o??K,c=-1):void 0===a[1]?c=-2:(c=r.lastIndex-a[2].length,l=a[1],r=void 0===a[3]?ee:'"'===a[3]?ie:te):r===ie||r===te?r=ee:r===Z||r===Q?r=K:(r=ee,o=void 0);const u=r===ee&&e[t+1].startsWith("/>")?" ":"";s+=r===K?i+z:c>=0?(n.push(l),i.slice(0,c)+X+i.slice(c)+V+u):i+V+(-2===c?t:u)}return[ce(e,s+(e[i]||"<?>")+(2===t?"</svg>":"")),n]};class ue{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let o=0,s=0;const r=e.length-1,l=this.parts,[a,c]=de(e,t);if(this.el=ue.createElement(a,i),ae.currentNode=this.el.content,2===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(n=ae.nextNode())&&l.length<r;){if(1===n.nodeType){if(n.hasAttributes())for(const e of n.getAttributeNames())if(e.endsWith(X)){const t=c[s++],i=n.getAttribute(e).split(V),r=/([.?@])?(.*)/.exec(t);l.push({type:1,index:o,name:r[2],strings:i,ctor:"."===r[1]?fe:"?"===r[1]?ge:"@"===r[1]?ye:me}),n.removeAttribute(e)}else e.startsWith(V)&&(l.push({type:6,index:o}),n.removeAttribute(e));if(ne.test(n.tagName)){const e=n.textContent.split(V),t=e.length-1;if(t>0){n.textContent=M?M.emptyScript:"";for(let i=0;i<t;i++)n.append(e[i],J()),ae.nextNode(),l.push({type:2,index:++o});n.append(e[t],J())}}}else if(8===n.nodeType)if(n.data===B)l.push({type:2,index:o});else{let e=-1;for(;-1!==(e=n.data.indexOf(V,e+1));)l.push({type:7,index:o}),e+=V.length-1}o++}}static createElement(e,t){const i=W.createElement("template");return i.innerHTML=e,i}}function he(e,t,i=e,n){if(t===se)return t;let o=void 0!==n?i._$Co?.[n]:i._$Cl;const s=G(t)?void 0:t._$litDirective$;return o?.constructor!==s&&(o?._$AO?.(!1),void 0===s?o=void 0:(o=new s(e),o._$AT(e,i,n)),void 0!==n?(i._$Co??=[])[n]=o:i._$Cl=o),void 0!==o&&(t=he(e,o._$AS(e,t.values),o,n)),t}class pe{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,n=(e?.creationScope??W).importNode(t,!0);ae.currentNode=n;let o=ae.nextNode(),s=0,r=0,l=i[0];for(;void 0!==l;){if(s===l.index){let t;2===l.type?t=new ve(o,o.nextSibling,this,e):1===l.type?t=new l.ctor(o,l.name,l.strings,this,e):6===l.type&&(t=new _e(o,this,e)),this._$AV.push(t),l=i[++r]}s!==l?.index&&(o=ae.nextNode(),s++)}return ae.currentNode=W,n}p(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class ve{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,i,n){this.type=2,this._$AH=re,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=he(this,e,t),G(e)?e===re||null==e||""===e?(this._$AH!==re&&this._$AR(),this._$AH=re):e!==this._$AH&&e!==se&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>F(e)||"function"==typeof e?.[Symbol.iterator])(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==re&&G(this._$AH)?this._$AA.nextSibling.data=e:this.$(W.createTextNode(e)),this._$AH=e}g(e){const{values:t,_$litType$:i}=e,n="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=ue.createElement(ce(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===n)this._$AH.p(t);else{const e=new pe(n,this),i=e.u(this.options);e.p(t),this.$(i),this._$AH=e}}_$AC(e){let t=le.get(e.strings);return void 0===t&&le.set(e.strings,t=new ue(e)),t}T(e){F(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const o of e)n===t.length?t.push(i=new ve(this.k(J()),this.k(J()),this,this.options)):i=t[n],i._$AI(o),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class me{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,n,o){this.type=1,this._$AH=re,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=o,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=re}_$AI(e,t=this,i,n){const o=this.strings;let s=!1;if(void 0===o)e=he(this,e,t,0),s=!G(e)||e!==this._$AH&&e!==se,s&&(this._$AH=e);else{const n=e;let r,l;for(e=o[0],r=0;r<o.length-1;r++)l=he(this,n[i+r],t,r),l===se&&(l=this._$AH[r]),s||=!G(l)||l!==this._$AH[r],l===re?e=re:e!==re&&(e+=(l??"")+o[r+1]),this._$AH[r]=l}s&&!n&&this.O(e)}O(e){e===re?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class fe extends me{constructor(){super(...arguments),this.type=3}O(e){this.element[this.name]=e===re?void 0:e}}class ge extends me{constructor(){super(...arguments),this.type=4}O(e){this.element.toggleAttribute(this.name,!!e&&e!==re)}}class ye extends me{constructor(e,t,i,n,o){super(e,t,i,n,o),this.type=5}_$AI(e,t=this){if((e=he(this,e,t,0)??re)===se)return;const i=this._$AH,n=e===re&&i!==re||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==re&&(i===re||n);n&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class _e{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){he(this,e)}}const we=H.litHtmlPolyfillSupport;we?.(ue,ve),(H.litHtmlVersions??=[]).push("3.1.0");class be extends j{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,i)=>{const n=i?.renderBefore??t;let o=n._$litPart$;if(void 0===o){const e=i?.renderBefore??null;n._$litPart$=o=new ve(t.insertBefore(J(),e),e,void 0,i??{})}return o._$AI(e),o})(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return se}}be._$litElement$=!0,be.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:be});const $e=globalThis.litElementPolyfillSupport;$e?.({LitElement:be}),(globalThis.litElementVersions??=[]).push("4.0.2");const xe={attribute:!0,type:String,converter:L,reflect:!1,hasChanged:D},Ee=(e=xe,t,i)=>{const{kind:n,metadata:o}=i;let s=globalThis.litPropertyMetadata.get(o);if(void 0===s&&globalThis.litPropertyMetadata.set(o,s=new Map),s.set(i.name,e),"accessor"===n){const{name:n}=i;return{set(i){const o=t.get.call(this);t.set.call(this,i),this.requestUpdate(n,o,e)},init(t){return void 0!==t&&this.C(n,void 0,e),t}}}if("setter"===n){const{name:n}=i;return function(i){const o=this[n];t.call(this,i),this.requestUpdate(n,o,e)}}throw Error("Unsupported decorator location: "+n)};function Ae(e){return(t,i)=>"object"==typeof i?Ee(e,t,i):((e,t,i)=>{const n=t.hasOwnProperty(i);return t.constructor.createProperty(i,n?{...e,wrapped:!0}:e),n?Object.getOwnPropertyDescriptor(t,i):void 0})(e,t,i)}const Ce="browser_mod-browser-id";var Se=null;function Pe(e){var t,i,n;if(null===(t=null==e?void 0:e.hass)||void 0===t?void 0:t.localize){const t=function(e){return"lovelace"===(null==e?void 0:e.url_path)?"panel.states":"profile"===(null==e?void 0:e.url_path)?"panel.profile":`panel.${null==e?void 0:e.title}`}(e.panel);return e.hass.localize(t)||(null===(i=e.panel)||void 0===i?void 0:i.title)||""}return(null===(n=null==e?void 0:e.panel)||void 0===n?void 0:n.title)||""}async function Ue(){const e=await async function(e){let t=await i(e);for(;null===t;)await new Promise((e=>setTimeout(e,100))),t=await i(e);return t;async function i(e){let t=await v(e,"home-assistant $ home-assistant-main $ partial-panel-resolver>*");return t||(t=await v(e,"hc-main $ hc-lovelace")),t||(t=await v(e,"hc-main $ hc-lovelace")),t}}(document),t=function(e){var t,i,n,o,s;return{panelTitle:Pe(e),panelUrlPath:(null===(i=null===(t=null==e?void 0:e.route)||void 0===t?void 0:t.prefix)||void 0===i?void 0:i.replace(/^\/|\/$/g,""))||"",panelComponentName:(null===(n=null==e?void 0:e.panel)||void 0===n?void 0:n.component_name)||"",panelIcon:(null===(o=null==e?void 0:e.panel)||void 0===o?void 0:o.icon)||"",panelNarrow:(null==e?void 0:e.narrow)||!1,panelRequireAdmin:(null===(s=null==e?void 0:e.panel)||void 0===s?void 0:s.require_admin)||!1}}(e),i=await async function(e){var t,i,n,o,s,r,l,a,c,d;if("lovelace"!==(null===(t=null==e?void 0:e.panel)||void 0===t?void 0:t.component_name))return{viewTitle:"",viewUrlPath:(null===(n=null===(i=null==e?void 0:e.route)||void 0===i?void 0:i.path)||void 0===n?void 0:n.replace(/^\/|\/$/g,""))||"",viewNarrow:(null==e?void 0:e.narrow)||!1};let u=0;for(;!(null===(o=e.shadowRoot)||void 0===o?void 0:o.querySelector("hui-root"))&&u<100;)await new Promise((e=>setTimeout(e,10))),u++;const h=e.shadowRoot.querySelector("hui-root");if(!h)return{};const p=h._curView||0;return{viewTitle:(null===(l=null===(r=null===(s=h.config)||void 0===s?void 0:s.views)||void 0===r?void 0:r[p])||void 0===l?void 0:l.title)||"",viewUrlPath:(null===(d=null===(c=null===(a=h.config)||void 0===a?void 0:a.views)||void 0===c?void 0:c[p])||void 0===d?void 0:d.path)||`${p}`,viewNarrow:h.narrow||!1}}(e),n=[];t.panelTitle&&n.push(t.panelTitle),i.viewTitle&&n.push(i.viewTitle);const o=[];return t.panelUrlPath&&o.push(t.panelUrlPath),i.viewUrlPath&&o.push(i.viewUrlPath),{hash:location.hash.substr(1)||"",panel:Object.assign(Object.assign({title:n.join(" - "),fullUrlPath:o.join("/")},t),i)}}function Te(){Se=new Promise((e=>e((async()=>{var e=await Ue(),t=window.location.pathname.slice(1).toLowerCase(),i=e.panel.fullUrlPath.toLowerCase();let n=0;for(;t!==i&&n++<200;)await new Promise((e=>setTimeout(e,10))),e=await Ue(),t=window.location.pathname.slice(1).toLowerCase(),i=e.panel.fullUrlPath.toLowerCase();return t!==i&&(console.groupCollapsed("UIX: cannot resolve Panel information after 2s."),console.log("Browser path:",t),console.log("Panel path:",i),console.log("Final panel state:",e),console.groupEnd()),e})())))}window.addEventListener("uix-bootstrap",(async e=>{e.stopPropagation(),["popstate","location-changed"].forEach((e=>{window.addEventListener(e,(async()=>{Se=null,Te(),Se.then((()=>{document.dispatchEvent(new CustomEvent("uix_update",{detail:{variablesChanged:!0}}))}))}))}))})),window.uix_template_cache=window.uix_template_cache||{};const Oe=window.uix_template_cache;async function Ne(e,t,i){const n=await a(),o=await(Se||Te(),Se),s=n.connection;i=Object.assign(Object.assign({user:n.user.name,browser:document.querySelector("hc-main")?"CAST":localStorage[Ce]?localStorage[Ce]:""},o),i);const r=JSON.stringify([t,i]);let l=Oe[r];if(l)l.debug&&(console.groupCollapsed("UIX: Reusing template"),console.log({template:l.template,variables:l.variables,value:l.value,error:l.error}),console.groupEnd()),l.callbacks.has(e)||Re(e),e(l.value),l.callbacks.add(e),l.cooldownTimeoutID&&clearTimeout(l.cooldownTimeoutID),l.cooldownTimeoutID=void 0;else{let n=!1;Re(e),e(""),(t.includes("uix.debug")||t.includes("card_mod.debug"))&&(n=!0,console.groupCollapsed("UIX: Binding template"),console.log({template:t,variables:i}),console.groupEnd()),Oe[r]=l={template:t,variables:i,value:"",callbacks:new Set([e]),debug:n,unsubscribe:s.subscribeMessage((e=>function(e,t){const i=Oe[e];i&&("error"in t?(i.error=t,i.value="",i.debug&&(console.groupCollapsed(`UIX: Template ${i.error.level}`),console.log({template:i.template,variables:i.variables,value:i.value,error:i.error}),console.groupEnd())):(i.value=t.result,i.debug&&(console.groupCollapsed("UIX: Template updated"),console.log({template:i.template,variables:i.variables,value:i.value,error:i.error}),console.groupEnd())),i.callbacks.forEach((e=>e(i.value))))}(r,e)),{type:"render_template",template:t,variables:i,report_errors:n})}}}async function Re(e){for(const[t,i]of Object.entries(Oe))if(i.callbacks.has(e)){i.callbacks.delete(e),0==i.callbacks.size&&(i.debug&&(console.groupCollapsed("UIX: Template unbound and will be unsubscribed after cooldown"),console.log({template:i.template,variables:i.variables}),console.groupEnd()),i.cooldownTimeoutID=window.setTimeout(Ie,2e4,t));break}}async function Ie(e){const t=Oe[e];t&&(t.cooldownTimeoutID&&clearTimeout(t.cooldownTimeoutID),t.debug&&(console.groupCollapsed("UIX: Unsubscribing template after cooldown"),console.log({template:t.template,variables:t.variables}),console.groupEnd()),delete Oe[e],await(await t.unsubscribe)())}const Le=async e=>{await(async()=>{var e;if(!customElements.get("developer-tools-event"))try{await customElements.whenDefined("partial-panel-resolver");const t=document.createElement("partial-panel-resolver");t.hass={panels:[{url_path:"tmp",component_name:"config"}]},t._updateRoutes(),await t.routerOptions.routes.tmp.load(),await customElements.whenDefined("ha-panel-config");const i=document.createElement("ha-panel-config");await(null===(e=i.routerOptions.routes["developer-tools"])||void 0===e?void 0:e.load()),await customElements.whenDefined("developer-tools-router");const n=document.createElement("developer-tools-router");await n.routerOptions.routes.event.load()}catch(e){console.error("CARD-MOD: Error loading yaml2json:",e)}})();const t=document.createElement("ha-yaml-editor");return t.hass={},t.hass.localize=e=>"Invalid YAML",t._onChange(new CustomEvent("yaml",{detail:{value:e}})),t.isValid?t.value:(console.error("CARD-MOD: Error loading theme yaml:",e),{})};function De(){document.dispatchEvent(new Event("uix_update"))}const ke=[customElements.whenDefined("home-assistant"),customElements.whenDefined("hc-main")];function je(e){if(!e)return!1;const t=e.trim().toLowerCase();return"true"===t||"1"===t||"yes"===t||"on"===t}async function He(e){var t;if(!e.type)return null;await function(){function e(e){return(null==e?void 0:e.themes)&&(null==e?void 0:e.themes.themes)&&(null==e?void 0:e.themes.theme)}return new Promise(((t,i)=>{let n=!1;(async()=>{if(e(await a()))return n=!0,void t();const o=window.setInterval((async()=>{e(await a())&&(n||(n=!0,clearInterval(o),clearTimeout(s),t()))}),500),s=window.setTimeout((()=>{n||(n=!0,clearInterval(o),i(new Error("UIX: themesReady: Timeout waiting for themes to become ready")))}),3e4)})()}))}();const i=e.parentElement?e.parentElement:e,n=window.getComputedStyle(i),o=n.getPropertyPriority("--uix-theme")||n.getPropertyValue("--card-mod-theme");let s=!1;je(n.getPropertyValue(`--uix-${e.type}-debug`)||n.getPropertyValue(`--card-mod-${e.type}-debug`))&&(s=!0);for(const t of e.classes){if(je(n.getPropertyValue(`--uix-${e.type}-${t}-debug`)||n.getPropertyValue(`--card-mod-${e.type}-${t}-debug`))){s=!0;break}}e.debug||(e.debug=!!s),e.debug&&console.log("UIX Debug: Theme:",o);const r=await a();if(!r)return{};const l=null!==(t=null==r?void 0:r.themes.themes)&&void 0!==t?t:{};return l[o]?l[o][`uix-${e.type}-yaml`]?Le(l[o][`uix-${e.type}-yaml`]):l[o][`card-mod-${e.type}-yaml`]?Le(l[o][`card-mod-${e.type}-yaml`]):l[o][`uix-${e.type}`]?{".":l[o][`uix-${e.type}`]}:l[o][`card-mod-${e.type}`]?{".":l[o][`card-mod-${e.type}`]}:{}:{}}s.race(ke).then((()=>{window.setTimeout((async()=>{var e,t;const i=await a();for(;!i;)await new Promise((e=>window.setTimeout(e,500)));i.connection.subscribeEvents((()=>{window.setTimeout(De,500)}),"themes_updated"),null===(e=document.querySelector("home-assistant"))||void 0===e||e.addEventListener("settheme",De),null===(t=document.querySelector("hc-main"))||void 0===t||t.addEventListener("settheme",De)}),1e3)}));class Me extends be{constructor(){super(...arguments),this._uix=[]}setConfig(e,t,...i){null==e||e(t,...i),this._uix.forEach((e=>{var i,n;e.variables={config:t},e.styles=(null===(i=t.uix)||void 0===i?void 0:i.style)||(null===(n=t.card_mod)||void 0===n?void 0:n.style)||{}}))}updated(e,...t){null==e||e(...t),Promise.all([this.updateComplete]).then((()=>this._uix.forEach((e=>{var t;return null===(t=e.refresh)||void 0===t?void 0:t.call(e)}))))}}async function qe(e,t,i=void 0,n={},o=!0,s=void 0){var r,l;let a=!1;return void 0!==s&&"string"!=typeof s&&(a=!0,o=s,s=void 0),"boolean"!=typeof o&&(o=!0,a=!0),"string"==typeof i&&(i={style:i},a=!0),i&&0!==Object.keys(i).length&&void 0===(null!==(l=null!==(r=null==i?void 0:i.style)&&void 0!==r?r:null==i?void 0:i.class)&&void 0!==l?l:null==i?void 0:i.debug)&&(i={style:i},a=!0),a&&!window.uix_compatibility_warning&&(window.uix_compatibility_warning=!0,console.groupCollapsed("UIX warning"),console.info("You are using a custom card which relies on UIX, and uses an outdated signature for applyToElement."),console.info("The outdated signature will be removed at some point in the future. Hopefully the developer of your card will have updated their card by then."),console.info("The card used UIX to apply styles here:",e),console.groupEnd()),Xe(e,t,i,n,o,s)}async function Xe(e,t,i=void 0,n={},o=!0,s=void 0){var r,l,a,c,d,u,h;const p=(null==i?void 0:i.debug)?(...e)=>console.log("UIX Debug:",...e):(...e)=>{};if(p("Applying UIX to:",...(null==e?void 0:e.host)?["#shadow-root of:",null==e?void 0:e.host]:[e],"type: ",t,"configuration: ",i),!e)return;(null===(r=e.localName)||void 0===r?void 0:r.includes("-"))&&await customElements.whenDefined(e.localName),e._uix=e._uix||[],customElements.get("uix-node")||(p("Waiting for uix-node customElement to be defined"),await customElements.whenDefined("uix-node"));const v=null!==(l=e._uix.find((e=>e.type===t)))&&void 0!==l?l:document.createElement("uix-node");return p("Applying UIX in:",v),v.type=t,v.uix_class=s,v.debug=null!==(a=null==i?void 0:i.debug)&&void 0!==a&&a,v.cancelStyleChild(),e._uix.includes(v)||e._uix.push(v),window.setTimeout((async()=>{var t,s,r,l;await Promise.all([e.updateComplete]);const a=(null!==(t=e.modElement)&&void 0!==t?t:o)&&null!==(s=e.shadowRoot)&&void 0!==s?s:e;if(!a.contains(v)){const t=null===(null===(r=null==e?void 0:e.renderOptions)||void 0===r?void 0:r.renderBefore);t&&p("Lit prepend workaround applied for:",e),(null==i?void 0:i.prepend)||t?a.prepend(v):a.appendChild(v)}v.variables=n,v.styles=null!==(l=null==i?void 0:i.style)&&void 0!==l?l:""}),1),v.classes="string"==typeof(null==i?void 0:i.class)?null===(d=null===(c=null==i?void 0:i.class)||void 0===c?void 0:c.split)||void 0===d?void 0:d.call(c," "):[...null!==(u=null==i?void 0:i.class)&&void 0!==u?u:[]],s&&v.classes.push(s),null===(h=e.classList)||void 0===h||h.add(...v.classes),v}function Ve(e,t){const i=e=>e&&"object"==typeof e&&!Array.isArray(e);if(i(e)&&i(t))for(const n in t)i(t[n])?(e[n]||Object.assign(e,{[n]:{}}),"string"==typeof e[n]&&(e[n]={".":e[n]}),Ve(e[n],t[n])):e[n]?e[n]=t[n]+e[n]:e[n]=t[n];return e}function Be(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(!(e instanceof Object&&t instanceof Object))return!1;for(const i in e)if(e.hasOwnProperty(i)){if(!t.hasOwnProperty(i))return!1;if(e[i]!==t[i]){if("object"!=typeof e[i])return!1;if(!Be(e[i],t[i]))return!1}}for(const i in t)if(t.hasOwnProperty(i)&&!e.hasOwnProperty(i))return!1;return!0}class ze extends be{static get applyToElement(){return qe}constructor(){super(),this.dynamicVariablesHaveChanged=!1,this.uix_children={},this.uix_parent=void 0,this.uix_class=void 0,this.classes=[],this.debug=!1,this._fixed_styles={},this._styles="",this._processStylesOnConnect=!1,this._rendered_styles="",this._cancel_style_child=[],this._observer=new MutationObserver((e=>{this.debug&&this._debug("Mutations observed:",e);let t=!0;for(const i of e){if("uix-node"===i.target.localName)return;i.addedNodes.length&&i.addedNodes.forEach((e=>{"uix-node"!==e.localName&&(t=!1)})),i.removedNodes.length&&i.removedNodes.forEach((e=>{"uix-node"!==e.localName&&(t=!1)}))}t||this.refresh()})),document.addEventListener("uix_update",(e=>{var t;this.dynamicVariablesHaveChanged=(null===(t=e.detail)||void 0===t?void 0:t.variablesChanged)||!1,this.isConnected?this._process_styles(this.uix_input):this._processStylesOnConnect=!0}))}connectedCallback(){var e,t,i;super.connectedCallback(),this._processStylesOnConnect?(this._processStylesOnConnect=!1,this._debug("Processing styles on (Re)connect:","type:",this.type,"for:",...(null===(e=null==this?void 0:this.parentNode)||void 0===e?void 0:e.host)?["#shadow-root of:",null===(t=null==this?void 0:this.parentNode)||void 0===t?void 0:t.host]:[null!==(i=this.parentElement)&&void 0!==i?i:this.parentNode]),this._process_styles(this.uix_input)):this.refresh(),this.setAttribute("slot","none"),this.style.display="none"}disconnectedCallback(){super.disconnectedCallback(),this._disconnect()}set styles(e){Be(e,this.uix_input)||(this.uix_input=e,this.isConnected?this._process_styles(e):this._processStylesOnConnect=!0)}get styles(){return this._styles}refresh(){this._connect()}cancelStyleChild(){this._cancel_style_child.forEach((e=>e())),this._cancel_style_child=[]}_debug(...e){this.debug&&console.log("UIX Debug:",...e)}async _process_styles(e){let t="string"==typeof e||void 0===e?{".":null!=e?e:""}:JSON.parse(JSON.stringify(e));Ve(t,await He(this)),this._fixed_styles=t,this.refresh()}async _style_child(e,t,i=0){const n=this.parentElement||this.parentNode,o=await v(n,e,!0);if(!o||!o.length){if(i>5)throw new Error("NoElements");let n=new Promise(((e,t)=>{setTimeout(e,100*i),this._cancel_style_child.push(t)}));return await n.catch((e=>{throw new Error("Cancelled")})),this._style_child(e,t,i+1)}return[...o].map((async e=>{const i=await Xe(e,`${this.type}-child`,{style:t,debug:this.debug},this.variables,!1);return i&&(i.uix_parent=this),i}))}async _connect(){var e,t,i,n,o,s;const r=null!==(e=this._fixed_styles)&&void 0!==e?e:{},l={};let a="",c=!1;this._debug("(Re)connecting:","type:",this.type,"to:",...(null===(t=null==this?void 0:this.parentNode)||void 0===t?void 0:t.host)?["#shadow-root of:",null===(i=null==this?void 0:this.parentNode)||void 0===i?void 0:i.host]:[null!==(n=this.parentElement)&&void 0!==n?n:this.parentNode]),this.cancelStyleChild();for(const[e,t]of Object.entries(r))"."===e?"string"==typeof t?a=t:this._debug("Style of '.' must be a string: ",t):(c=!0,l[e]=this._style_child(e,t).catch((t=>{if("NoElements"!=t.message){if("Cancelled"!=t.message)throw t;this.debug&&(console.groupCollapsed("UIX style_child cancelled while looking for elements"),console.info(`Looked for ${e}`),console.info(this),console.groupEnd())}else this.debug&&(console.groupCollapsed("UIX found no elements"),console.info(`Looked for ${e}`),console.info(this),console.groupEnd())})));for(const e in this.uix_children)l[e]||null===(o=await this.uix_children[e])||void 0===o||o.forEach((async e=>await e.then((e=>e.styles="")).catch((()=>{}))));if(this.uix_children=l,c){this._observer.disconnect();const e=null!==(s=this.parentElement)&&void 0!==s?s:this.parentNode;e&&(this.debug&&this._debug("Observing for changes on:",e),this._observer.observe(e,{childList:!0}),e.host&&(this.debug&&this._debug("Observing for changes on:",e.host),this._observer.observe(e.host,{childList:!0})))}var d;(this._styles!==a||this.dynamicVariablesHaveChanged)&&(this._styles=a,this.dynamicVariablesHaveChanged=!1,(d=this._styles)&&(String(d).includes("{%")||String(d).includes("{{"))?(this._renderer=this._renderer||this._style_rendered.bind(this),Ne(this._renderer,this._styles,this.variables)):this._style_rendered(this._styles||""))}async _disconnect(){var e,t;this._observer.disconnect(),this._styles="",this.cancelStyleChild(),await Re(this._renderer),null===(t=null===(e=this.uix_parent)||void 0===e?void 0:e.refresh)||void 0===t||t.call(e)}_style_rendered(e){this._rendered_styles!==e&&(this._rendered_styles=e),this.dispatchEvent(new Event("uix-styles-update"))}createRenderRoot(){return this}render(){return oe`
      <style>
        ${this._rendered_styles}
      </style>
    `}}g([Ae({attribute:"uix-type",reflect:!0})],ze.prototype,"type",void 0),g([Ae()],ze.prototype,"_rendered_styles",void 0),customElements.get("uix-node")||(customElements.define("uix-node",ze),console.groupCollapsed(`%cðŸ’¡ UIX ${d.version} IS INSTALLED ðŸ’¡`,"color: white; background-color: #CE3226; padding: 2px 5px; font-weight: bold; border-radius: 5px;"),console.log("Documentation:","https://uix.lf.technology/"),console.groupEnd(),window.dispatchEvent(new Event("uix-bootstrap"))),(async()=>{for(;void 0===customElements.get("home-assistant");)await new Promise((e=>window.setTimeout(e,100)));customElements.get("uix-node")||customElements.define("uix-node",ze)})(),window.uix_patch_state=window.uix_patch_state||{};const We=window.uix_patch_state,Je=window.card_mod_patch_state,Ge=function(e,t,i){if("constructor"===t)return;const n=e[t];e[t]=function(...e){try{return i.call(this,null==n?void 0:n.bind(this),...e)}catch(t){return null==n?void 0:n.bind(this)(...e)}}},Fe=(e,t)=>{if(e)for(const i in Object.getOwnPropertyDescriptors(t.prototype))Ge(e,i,t.prototype[i])},Ye=async(e,t,i)=>{"string"==typeof e&&(await customElements.whenDefined(e),e=customElements.get(e));const n=Fe(e.prototype,t);return null==i||i(),n};function Ke(e,t){return function(i){var n,o,s,r,l,a;const c="string"==typeof e?e:e.name,u=null!==(s=null!==(o=null===(n=We[c])||void 0===n?void 0:n.patched)&&void 0!==o?o:We[c])&&void 0!==s&&s,h=null!==(a=null!==(l=null===(r=null==Je?void 0:Je[c])||void 0===r?void 0:r.patched)&&void 0!==l?l:null==Je?void 0:Je[c])&&void 0!==a&&a;u||h?function(e){var t,i;if(window.uix_patch_warning)return;window.uix_patch_warning=!0;const n=`UIX (${d.version}): ${e} already patched by ${(null===(t=We[e])||void 0===t?void 0:t.version)||(Je[e]?`Card-mod (${(null===(i=Je[e])||void 0===i?void 0:i.version)||"unknown Card-mod version"})`:"unknown version")}!`,o=["Make sure you are using the latest version of UIX."];v(document.body,"home-assistant").then((e=>{var t,i,s,r;if(null==e?void 0:e.hass){null!==(i=null===(t=e.hass.user)||void 0===t?void 0:t.name)&&void 0!==i?i:null===(s=e.hass.user)||void 0===s?void 0:s.id;const l=`User: ${(null===(r=e.hass.user)||void 0===r?void 0:r.name)||"unknown"}\n\nBrowser: ${navigator.userAgent}`;e.hass.callService("system_log","write",{logger:`uix.${d.version}`,level:"warning",message:`${n} ${o.join(" ")} ${l}`},void 0,!1).catch((e=>{console.error("UIX: Failed to create duplicate patch warning notification",e)}))}}))}(c):(We[c]={patched:!0,version:d.version},Ye(e,i,t))}}const Ze=["conditional","entity-filter"];let Qe=class extends Me{constructor(){super(...arguments),this._uix=[]}async _add_card_mod(){var e,t,i,n,o;if(!this._element)return;if(Ze.includes(null===(t=null===(e=this.config)||void 0===e?void 0:e.type)||void 0===t?void 0:t.toLowerCase()))return;const s=this._element,r=(null==s?void 0:s.config)||(null==s?void 0:s._config)||this.config,l=`type-${null===(n=null===(i=null==r?void 0:r.type)||void 0===i?void 0:i.replace)||void 0===n?void 0:n.call(i,":","-")}`;await Xe(this._element,"card",null!==(o=null==r?void 0:r.uix)&&void 0!==o?o:null==r?void 0:r.card_mod,{config:r},!0,l)}_loadElement(e,...t){null==e||e(...t),this._add_card_mod()}};Qe=g([Ke("hui-card")],Qe);let et=class extends Me{constructor(){super(...arguments),this._uix=[]}async firstUpdated(e,...t){var i,n,o,s,r,l;await(null==e?void 0:e(...t));const a=null===(n=null===(i=this.parentNode)||void 0===i?void 0:i.host)||void 0===n?void 0:n.parentNode;if(a&&"hui-card"===a.localName)return;const c=tt(this);if(!c)return;const d=`type-${null===(s=null===(o=null==c?void 0:c.type)||void 0===o?void 0:o.replace)||void 0===s?void 0:s.call(o,":","-")}`;await Xe(this,"card",null!==(r=null==c?void 0:c.uix)&&void 0!==r?r:null==c?void 0:c.card_mod,{config:c},!1,d);const u=null===(l=this.parentNode)||void 0===l?void 0:l.host;u&&(Fe(u,Me),u._uix=this._uix)}};function tt(e){return e.config?e.config:e._config?e._config:e.host?tt(e.host):e.parentElement?tt(e.parentElement):e.parentNode?tt(e.parentNode):null}et=g([Ke("ha-card")],et);let it=class extends Me{firstUpdated(e,...t){var i;null==e||e(...t),Xe(this,"grid-section",null!==(i=this._config.uix)&&void 0!==i?i:this._config.card_mod,{config:this._config},!0,"type-grid-section")}};it=g([Ke("hui-grid-section")],it);let nt=class extends Me{async _createCards(e,...t){var i;const n=null===(i=this.config)||void 0===i?void 0:i.strategy,o=Object.assign({},t[0]);n&&(n.uix||n.card_mod)&&Object.entries(o.cards).forEach((([e,t])=>{var i,s,r,l,a,c,d,u;t.type&&(t.type in n.uix||t.type in n.card_mod)&&(((null===(i=n.uix)||void 0===i?void 0:i.debug)||(null===(s=n.card_mod)||void 0===s?void 0:s.debug))&&console.log("UIX Debug: adding uix to card",t,"with",null!==(l=null===(r=n.uix)||void 0===r?void 0:r[t.type])&&void 0!==l?l:null===(a=n.card_mod)||void 0===a?void 0:a[t.type]),o.cards[e]=Object.assign(Object.assign({},t),{uix:null!==(d=null===(c=n.uix)||void 0===c?void 0:c[t.type])&&void 0!==d?d:null===(u=n.card_mod)||void 0===u?void 0:u[t.type]}))})),null==e||e(o)}};nt=g([Ke("hui-section")],nt);const ot=["entity-filter"];let st=class extends Me{async _add_uix(){var e,t,i,n,o,s,r,l;if(!this._element)return;if(ot.includes(null===(t=null===(e=this.config)||void 0===e?void 0:e.type)||void 0===t?void 0:t.toLowerCase()))return;const a=`type-${null===(o=null===(n=null===(i=this.config)||void 0===i?void 0:i.type)||void 0===n?void 0:n.replace)||void 0===o?void 0:o.call(n,":","-")}`;await Xe(this._element,"badge",null!==(r=null===(s=this.config)||void 0===s?void 0:s.uix)&&void 0!==r?r:null===(l=this.config)||void 0===l?void 0:l.card_mod,{config:this.config},!0,a),this._uix=this._element._uix}_loadElement(e,...t){null==e||e(...t),this._add_uix()}_updateElement(e,...t){null==e||e(...t),this._add_uix()}};st=g([Ke("hui-badge")],st);let rt=class extends Me{async _add_uix(){var e,t,i,n;if(!this._element)return;const o=`type-${null===(i=null===(t=null===(e=this.config)||void 0===e?void 0:e.type)||void 0===t?void 0:t.replace)||void 0===i?void 0:i.call(t,":","-")}`;await Xe(this._element,"heading-badge",null!==(n=this.config.uix)&&void 0!==n?n:this.config.card_mod,{config:this.config},!0,o),this._uix=this._element._uix}_loadElement(e,...t){null==e||e(...t),this._add_uix()}_updateElement(e,...t){null==e||e(...t),this._add_uix()}};rt=g([Ke("hui-heading-badge")],rt);let lt=class extends Me{async firstUpdated(e,...t){var i,n,o;await(null==e?void 0:e(...t)),await Xe(this,"assist-chip",null!==(n=null===(i=this.config)||void 0===i?void 0:i.uix)&&void 0!==n?n:null===(o=this.config)||void 0===o?void 0:o.card_mod,{config:this.config},!0,"type-assist-chip")}};lt=g([Ke("ha-assist-chip")],lt);let at=class extends Me{_renderEntity(e,t,...i){var n,o;const s=null==e?void 0:e(t,...i);if("custom:mod-card"===(null==t?void 0:t.type))return s;if(!(null==s?void 0:s.values))return s;const r=s.values[1];if(!r)return s;const l=(null==t?void 0:t.type)?`type-${null===(o=(n=t.type).replace)||void 0===o?void 0:o.call(n,":","-")}`:"type-entity",a=async()=>{var e;await h(r),Fe(r,Me),Xe(r,"row",null!==(e=null==t?void 0:t.uix)&&void 0!==e?e:null==t?void 0:t.card_mod,{config:t},!0,l),r.addEventListener("ll-rebuild",a)};return Promise.all([this.updateComplete]).then((()=>a())),s}};at=g([Ke("hui-entities-card")],at);let ct=class extends Me{setConfig(e,t,...i){var n,o,s,r;null==e||e(t,...i);const l=this._element;if(!l)return;if(!(null==t?void 0:t.row)||"custom:mod-card"===(null===(n=null==t?void 0:t.row)||void 0===n?void 0:n.type))return;const a=(null===(o=null==t?void 0:t.row)||void 0===o?void 0:o.type)?`type-${null===(r=(s=t.row.type).replace)||void 0===r?void 0:r.call(s,":","-")}`:"type-entity",c=async()=>{var e;await h(l),Fe(l,Me),Xe(l,"row",null!==(e=t.row.uix)&&void 0!==e?e:t.row.card_mod,{config:t.row},!0,a),l.addEventListener("ll-rebuild",c)};Promise.all([this.updateComplete]).then((()=>c()))}};ct=g([Ke("hui-conditional-row")],ct);let dt=class extends Me{updated(e,...t){var i,n,o,s;null==e||e(...t);for(const e of this.shadowRoot.querySelectorAll("ha-card div.entity")){Fe(e,Me);const t=null!==(i=e.shadowRoot)&&void 0!==i?i:e.attachShadow({mode:"open"});for(;e.firstChild;)t.append(e.firstChild);const r=null!==(n=e.querySelector("style[uix]"))&&void 0!==n?n:document.createElement("style");r.setAttribute("uix",""),r.innerHTML="\ndiv {\n  width: 100%;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.name {\n  min-height: var(--paper-font-body1_-_line-height, 20px);\n}\nstate-badge {\n  margin: 8px 0;\n}\n",t.append(r);const l=null!==(o=e.config)&&void 0!==o?o:e.entityConfig;Xe(e,"glance",null!==(s=null==l?void 0:l.uix)&&void 0!==s?s:null==l?void 0:l.card_mod,{config:l})}}};dt=g([Ke("hui-glance-card")],dt);let ut=class extends Me{setConfig(e,...t){null==e||e(...t);const i=async()=>{var e,t,i;for(const[n,o]of this._elements.entries()){await h(o),Fe(o,Me);const s=this._config.elements[n],r=`type-${null===(t=null===(e=null==s?void 0:s.type)||void 0===e?void 0:e.replace)||void 0===t?void 0:t.call(e,":","-")}`;Xe(o,"element",null!==(i=null==s?void 0:s.uix)&&void 0!==i?i:null==s?void 0:s.card_mod,{config:s},!0,r)}};Promise.all([this.updateComplete]).then((()=>i()))}};ut=g([Ke("hui-picture-elements-card")],ut);let ht=class extends Me{setConfig(e,...t){null==e||e(...t);const i=async()=>{var e,t,i;for(const[n,o]of this._elements.entries()){await h(o),Fe(o,Me);const s=this._config.elements[n],r=`type-${null===(t=null===(e=null==s?void 0:s.type)||void 0===e?void 0:e.replace)||void 0===t?void 0:t.call(e,":","-")}`;Xe(o,"element",null!==(i=null==s?void 0:s.uix)&&void 0!==i?i:null==s?void 0:s.card_mod,{config:s},!0,r)}};Promise.all([this.updateComplete]).then((()=>i()))}};ht=g([Ke("hui-conditional-element")],ht);const pt=e=>{const t=window.getComputedStyle(e),i=t.getPropertyValue("--uix-icon")||t.getPropertyValue("--card-mod-icon");i&&(e.icon=i.trim());const n=t.getPropertyValue("--uix-icon-color")||t.getPropertyValue("--card-mod-icon-color");n&&(e.style.color=n);"none"===(t.getPropertyValue("--uix-icon-dim")||t.getPropertyValue("--card-mod-icon-dim"))&&(e.style.filter="none")},vt=async e=>{var t;pt(e),e._boundUix=null!==(t=e._boundUix)&&void 0!==t?t:new Set;const i=await _t(e);for(const t of i)e._boundUix.has(t)||(t.addEventListener("uix-styles-update",(async()=>{await t.updateComplete,pt(e)})),e._boundUix.add(t));if(e.cm_retries<5)return e.cm_retries++,window.setTimeout((()=>vt(e)),250*e.cm_retries)};let mt=class extends Me{constructor(){super(...arguments),this.cm_retries=0}updated(e,...t){null==e||e(...t),this.cm_retries=0,vt(this)}};mt=g([Ke("ha-state-icon")],mt);let ft=class extends Me{constructor(){super(...arguments),this.cm_retries=0}updated(e,...t){null==e||e(...t),this.cm_retries=0,vt(this)}};ft=g([Ke("ha-icon")],ft);let gt=class extends Me{constructor(){super(...arguments),this.cm_retries=0}updated(e,...t){var i,n;null==e||e(...t),"ha-icon"!==(null===(n=null===(i=this.parentNode)||void 0===i?void 0:i.host)||void 0===n?void 0:n.localName)&&(this.cm_retries=0,vt(this))}};function yt(e,t){for(const i of t)e.add(i)}async function _t(e,t=0){let i=new Set;if(10==t)return i;if(!e)return i;if(e.updateComplete&&await e.updateComplete,e._uix)for(const t of e._uix)t.styles&&i.add(t);return e.parentElement?yt(i,await _t(e.parentElement,t+1)):e.parentNode&&yt(i,await _t(e.parentNode,t+1)),e.host&&yt(i,await _t(e.host,t+1)),i}gt=g([Ke("ha-svg-icon")],gt);let wt=class extends Me{updated(e,...t){null==e||e(...t),Xe(this,"view",void 0,{},!1)}};wt=g([Ke("hui-view")],wt);let bt=class extends Me{firstUpdated(e,...t){null==e||e(...t),Xe(this,"root")}};bt=g([Ke("hui-root",(()=>{v(document,"home-assistant$home-assistant-main$partial-panel-resolver ha-panel-lovelace$hui-root",!1).then((e=>null==e?void 0:e.firstUpdated()))}))],bt);let $t=class extends Me{updated(e,...t){null==e||e(...t),Xe(this,"drawer",void 0,{},!0)}};function xt(e,t=new WeakSet){if(null==e)return e;const i=typeof e;if("function"===i)return;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement||"undefined"!=typeof Element&&e instanceof Element)return;if("object"!==i)return e;if(t.has(e))return;if(t.add(e),Array.isArray(e)){const i=e.map((e=>xt(e,t))).filter((e=>void 0!==e));return i}const n={};for(const[i,o]of Object.entries(e)){const e=xt(o,t);void 0!==e&&(n[i]=e)}return n}$t=g([Ke("ha-drawer")],$t);class Et extends Me{async showDialog(e,t,...i){await(null==e?void 0:e(t,...i)),this.requestUpdate(),this.updateComplete.then((async()=>{var e,i;let n=this.shadowRoot.querySelector("ha-dialog");if(n||(n=this.shadowRoot.querySelector("ha-adaptive-dialog")),n||(n=this.shadowRoot.querySelector("ha-wa-dialog")),n||(n=this.shadowRoot.querySelector("ha-md-dialog")),n||(n=this.shadowRoot.querySelector("ha-drawer")),!n)return;const o=`type-${null===(i=(e=this.localName).replace)||void 0===i?void 0:i.call(e,"ha-","")}`;Xe(n,"dialog",void 0,{params:xt(t)},!1,o)}))}}window.addEventListener("show-dialog",(function(e){var t;const i=null===(t=e.detail)||void 0===t?void 0:t.dialogTag;i&&!(e=>{var t,i,n;const o="string"==typeof e?e:e.constructor.name;return null!==(n=null!==(i=null===(t=We[o])||void 0===t?void 0:t.patched)&&void 0!==i?i:We[o])&&void 0!==n&&n})(i)&&((e=>{const t="string"==typeof e?e:e.constructor.name;We[t]={patched:!0,version:d.version}})(i),Ye(i,Et))}),{capture:!0});let At=class extends Me{showDialog(e,t,...i){null==e||e(t,...i),this.requestUpdate(),this.updateComplete.then((async()=>{var e;const i=null!==(e=this.shadowRoot.querySelector("ha-adaptive-dialog"))&&void 0!==e?e:this.shadowRoot.querySelector("ha-dialog");i&&Xe(i,"more-info",void 0,{config:t},!1)}))}};At=g([Ke("ha-more-info-dialog")],At);let Ct=class extends Me{firstUpdated(e,...t){null==e||e(...t),Xe(this,"sidebar")}};Ct=g([Ke("ha-sidebar",(()=>{v(document,"home-assistant$home-assistant-main$ha-sidebar",!1).then((e=>null==e?void 0:e.firstUpdated()))}))],Ct);class St extends be{setConfig(e,t,...i){var n,o;const s=JSON.parse(JSON.stringify(t));if(this._uixData={uix:void 0,card_mod:void 0,entities:[]},s.uix?this._uixData.uix=s.uix:s.card_mod&&(this._uixData.card_mod=s.card_mod),delete s.uix,delete s.card_mod,Array.isArray(s.entities))for(const[e,t]of null===(o=null===(n=s.entities)||void 0===n?void 0:n.entries)||void 0===o?void 0:o.call(n))this._uixData.entities[e]={uix:void 0,card_mod:void 0},t.uix?this._uixData.entities[e].uix=t.uix:t.card_mod&&(this._uixData.entities[e].card_mod=t.card_mod),delete t.uix,delete t.card_mod;e(s,...i)}}let Pt=class extends be{async getConfigElement(e,...t){const i=await e(...t);return Fe(i,St),i}_handleConfigChanged(e,t,...i){var n;const o=null===(n=this._configElement)||void 0===n?void 0:n._uixData;if(o&&o.uix&&(t.detail.config.uix=o.card),o&&o.card_mod&&(t.detail.config.card_mod=o.card_mod),o&&Array.isArray(o.entities))for(const[e,i]of o.entities.entries())i.uix&&(t.detail.config.entities[e].uix=i.uix),i.card_mod&&(t.detail.config.entities[e].card_mod=i.card_mod);e(t,...i)}};Pt=g([Ke("hui-card-element-editor")],Pt);let Ut=class extends be{updated(e,...t){var i,n;null==e||e(...t),this._uixIcon||(this._uixIcon=document.createElement("ha-icon"),this._uixIcon.icon="mdi:brush");const o=this.shadowRoot.querySelector("ha-button[slot=secondaryAction]");o&&(o.appendChild(this._uixIcon),(null===(i=JSON.stringify(this._cardConfig))||void 0===i?void 0:i.includes("uix"))||(null===(n=JSON.stringify(this._cardConfig))||void 0===n?void 0:n.includes("card_mod"))?this._uixIcon.style.visibility="visible":this._uixIcon.style.visibility="hidden")}};Ut=g([Ke("hui-dialog-edit-card")],Ut);let Tt=class extends Me{updated(e,...t){null==e||e(...t),Xe(this,"config",{prepend:!0})}};Tt=g([Ke("ha-panel-config")],Tt);let Ot=class extends Me{updated(e,...t){null==e||e(...t),Xe(this,"panel-custom",{prepend:!0})}};Ot=g([Ke("ha-panel-custom")],Ot);let Nt=class extends Me{updated(e,...t){null==e||e(...t),Xe(this,"top-app-bar-fixed")}};Nt=g([Ke("ha-top-app-bar-fixed")],Nt);let Rt=class extends Me{updated(e,...t){null==e||e(...t),Xe(this,"developer-tools")}};Rt=g([Ke("ha-panel-developer-tools")],Rt);const It="\nha-card {\n  background: none;\n  box-shadow: none;\n  border: none;\n  transition: none;\n}";class Lt extends be{setConfig(e){var t,i,n,o,s,r,l;this._config=JSON.parse(JSON.stringify(e));let a=(null===(i=null===(t=this._config)||void 0===t?void 0:t.uix)||void 0===i?void 0:i.style)||(null===(o=null===(n=this._config)||void 0===n?void 0:n.card_mod)||void 0===o?void 0:o.style)||(null===(s=this._config)||void 0===s?void 0:s.style);void 0===a?a=It:"string"==typeof a?a=It+a:a["."]?a["."]=It+a["."]:a["."]=It,this._config.uix={style:a,debug:(null===(r=this._config.uix)||void 0===r?void 0:r.debug)||(null===(l=this._config.card_mod)||void 0===l?void 0:l.debug)||!1},this.build_card(e.card)}async build_card(e){void 0===this._hass&&await new Promise((e=>this._hassResolve=e)),this._hassResolve=void 0;const t=await window.loadCardHelpers();this.card=await t.createCardElement(e),this.card.hass=this._hass}firstUpdated(){window.setTimeout((()=>{var e,t;if(null===(t=null===(e=this.card)||void 0===e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelector("ha-card")){console.info("%cCheck your UIX configuration!","color: red; font-weight: bold");let e=this.card.localName.replace(/hui-(.*)-card/,"$1");console.info(`mod-card should RARELY be used with a card that already has a ha-card element, such as ${e}`)}}),3e3)}set hass(e){this._hass=e,this.card&&(this.card.hass=e),this._hassResolve&&this._hassResolve()}render(){return oe` <ha-card modcard> ${this.card} </ha-card> `}getCardSize(){if(this._config.report_size)return this._config.report_size;let e=this.shadowRoot;return e&&(e=e.querySelector("ha-card card-maker")),e&&(e=e.getCardSize),e&&(e=e()),e||1}}g([Ae()],Lt.prototype,"card",void 0),customElements.get("mod-card")||customElements.define("mod-card",Lt),(async()=>{for(;void 0===customElements.get("home-assistant");)await new Promise((e=>window.setTimeout(e,100)));customElements.get("mod-card")||customElements.define("mod-card",Lt)})();
